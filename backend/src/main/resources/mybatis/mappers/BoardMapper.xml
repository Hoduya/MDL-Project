<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
        

<mapper namespace="com.aiden.board.mapper.BoardMapper">
	
	<select resultType="com.aiden.board.dto.BoardDto" id="selectBoards">
		select BOARD_ID, USER_ID, TITLE, CONTENT, REG_DATE, UPDATE_DATE
		from TB_BOARD
		order BY BOARD_ID DESC
		LIMIT #{limit} OFFSET #{offset};
	</select>
	
	<select resultType="com.aiden.board.dto.BoardDto" id="selectByUserId">
		select BOARD_ID, USER_ID, TITLE, CONTENT, REG_DATE, UPDATE_DATE
		from TB_BOARD 
		where USER_ID=#{userId}
		order BY BOARD_ID DESC
		LIMIT #{limit} OFFSET #{offset};
	</select>

	<select resultType="Integer" id="selectCount"> 
		select count(*) from TB_BOARD
	</select>
	
	<select resultType="Integer" id="selectCountByUserId"> 
		select count(*) from TB_BOARD
		where USER_ID=#{userId}
	</select>
	
	<select resultType="com.aiden.board.dto.BoardDto" id="selectByBoardId">
		select BOARD_ID, USER_ID, TITLE, CONTENT, REG_DATE, UPDATE_DATE
		from TB_BOARD 
		where BOARD_ID=#{boardId}
	</select>
	
	<insert id="insertBoard" parameterType="BoardDto" useGeneratedKeys="true" keyProperty="boardId">
		insert into TB_BOARD(USER_ID, TITLE, CONTENT, REG_DATE)
		values(#{userId}, #{title}, #{content}, NOW())
	</insert>
	
	<update id="updateBoard" parameterType="boardDto">
  		UPDATE TB_BOARD
  		SET
    		TITLE = #{board.title},
    		CONTENT = #{board.content},
    		UPDATE_DATE = NOW()
  		WHERE
    		BOARD_ID = #{boardId}
	</update>

	<delete id="deleteBoard">
		delete from TB_BOARD where BOARD_ID=#{boardId}
	</delete>
	
</mapper>